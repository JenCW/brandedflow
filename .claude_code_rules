# CLAUDE CODE RULES FOR BRANDED + FLOW

## üö® READ THESE FILES FIRST (EVERY SESSION)

1. **AI_RULES.md** - Mandatory rules for all AI assistants
2. **docs/CONTEXT.md** - Current project state and priorities
3. **company/operations/UPDATE_CHECKLIST.md** - What to update when

## üìÅ FOLDER STRUCTURE (NEVER VIOLATE)

Root level has ONLY 6 folders:
- clients/
- company/
- docs/
- automations/
- systems/
- templates/

**If you need to create something, it goes IN ONE OF THESE, not at root level.**

## üìù NAMING RULES

- Files: `lowercase-kebab-case.md`
- Folders: `lowercase-kebab-case/`
- NO CAPS (except CONTEXT.md, README.md, etc. if already established)
- NO underscores
- NO spaces

## ‚ö†Ô∏è BEFORE TAKING ACTION

1. Check if it already exists: `grep -r "feature_name"`
2. Verify correct location using AI_RULES.md folder structure
3. Ask user if unsure where something belongs

## üéØ DOE METHOD - MANDATORY WORKFLOW

**Before executing ANY task, follow the Directive ‚Üí Orchestrate ‚Üí Execute pattern:**

### Step 1: Assess Task (3-Question Test)
Before using DOE, quickly assess:
1. **Will this be done again?** (Recurring task)
2. **Is this complex?** (Multiple steps, integrations, error-prone)
3. **Does consistency matter?** (Same quality every time)

**If 2+ answers are "Yes" ‚Üí Use DOE**
**If 0-1 answers are "Yes" ‚Üí Skip DOE, do it directly**

### Step 2: Check for Directive (If Using DOE)
1. Search for existing directive: `systems/doe-engine/directives/{task-name}.md`
2. If directive exists: Read it fully before proceeding
3. If no directive exists:
   - For common/recurring tasks: Ask user if you should create one
   - For one-off tasks: Proceed but note what directive could be created

### Step 3: Check for Execution Scripts (If Using DOE)
1. Before writing code, check: `systems/doe-engine/execution/`
2. If script exists: Use it (don't rewrite)
3. If no script exists: Create one for deterministic operations
4. Only write code directly if it's exploratory/prototyping

### Step 4: Orchestrate (Your Role)
- Read directive ‚Üí Understand goals/inputs/outputs
- Decide which execution scripts to call
- Handle errors and edge cases
- Update directive with learnings (ask permission first)

### Step 5: Self-Anneal on Errors
When something breaks:
1. Fix the execution script
2. Test it (ask before using paid APIs)
3. Update the directive with new learnings (ask permission)
4. Document what changed

**Key Principle:** Push complexity into deterministic scripts. You orchestrate, scripts execute.

**See:** `systems/doe-engine/gemini.md` for full architecture details

## üîÑ AFTER TAKING ACTION

1. Update docs/CONTEXT.md (if affects current state)
2. Update docs/DECISIONS_LOG.md (if significant decision)
3. Update relevant docs per UPDATE_CHECKLIST.md
4. Commit to git with clear message

## üìñ FULL RULES

See AI_RULES.md for complete details.

**Read AI_RULES.md at the start of EVERY session.**
